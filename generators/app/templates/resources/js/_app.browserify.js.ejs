// Global dependencies <%if (jsLibs && jsLibs.indexOf('jquery') !== -1) { %>
import $ from 'jquery';<% } %><%if (jsLibs && jsLibs.indexOf('veams-query') !== -1) { %>
import { default as $ } from 'veams-query';<% } %><% if (veamsPackages) { %>
import Veams from 'veams';
import VeamsLogger from 'veams/src/js/plugins/logger';
import VeamsDOM from 'veams/src/js/plugins/dom';
import VeamsVent from 'veams/src/js/plugins/vent';
import VeamsModules from 'veams/src/js/plugins/modules';
import VeamsMediaQueryHandler from 'veams/src/js/plugins/media-query-handler';<% } %><%if (jsLibs && jsLibs.indexOf('backbone') !== -1) { %>
var Backbone = require('backbone');<% } %><%if (jsLibs && jsLibs.indexOf('exoskeleton') !== -1) { %>
var Exo = require('exoskeleton');<% } %>

let App = {};

(function(){
	'use strict';

	// Save a reference to the global object
	const root = window;
    App = root.App = window.App || {};
<%if (jsLibs && jsLibs.indexOf('jquery') !== -1) { %>
	App.$ = $;<% } %>
<%if (jsLibs && jsLibs.indexOf('veams-query') !== -1) { %>
	App.$$ = VeamsQuery;<% } %><% if (veamsPackages) { %>

	// Intialize core of Veams
	Veams.core.initialize();

    /**
     * Veams Plugins
     */

	// Dom Plugin
	Veams.use(VeamsDOM, {
	    DOM: $
	});

    // Vent Plugin
	Veams.use(VeamsVent);

    // Logger Plugin for devmode and logger
	Veams.use(VeamsLogger);

    // Module System Plugin
	Veams.use(VeamsModules, {
	    useMutationObserver: true
	});

    // Media Query Handler Plugin
	Veams.use(VeamsMediaQueryHandler);<% } %>

	// Versioning
	App.version = "0.0.1";

	return App;

}).call(this);

export {App, Veams};